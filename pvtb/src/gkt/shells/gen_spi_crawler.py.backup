#!/usr/bin/env python3
import sys, os
sys.path.append(os.path.dirname(os.path.realpath(__file__)) + '/../test')
sys.path.append(os.path.dirname(os.path.realpath(__file__)) + '/../src')
from gkt_util import *
from spi_crawler import *
tgid_x_en = 0
tgid_y_en = 0
tgid_z_en = 0
tg_size_en = 0
user_sgpr = 0
vgpr = 1
unorder = 1

workgroup_size_x = 8
grid_size_x = 288
inst_ipw = 192
pip = 1
spitest = SpiClass(grid_size_x *64*workgroup_size_x, workgroup_size_x*64,user_sgpr,tgid_x_en,tgid_y_en,tgid_z_en,tg_size_en,vgpr,unorder,inst_ipw)
spitest.test_args.update({TEST_ARGS_NAME : f"perf_spi_launch_crawler/perf_spi_launch_crawler_ipw{inst_ipw}_tg{grid_size_x}_wpg{workgroup_size_x}_pip{pip}"})
	print(spitest.test_args[TEST_ARGS_NAME])
spitest.gen_output()


workgroup_size_x = 4
grid_size_x = 288
inst_ipw = 256
pip = 2
spitest = SpiClass(grid_size_x *64*workgroup_size_x, workgroup_size_x*64,user_sgpr,tgid_x_en,tgid_y_en,tgid_z_en,tg_size_en,vgpr,unorder,inst_ipw)
spitest.test_args.update({TEST_ARGS_NAME : f"perf_spi_launch_crawler/perf_spi_launch_crawler_ipw{inst_ipw}_tg{grid_size_x}_wpg{workgroup_size_x}_pip{pip}"})
	print(spitest.test_args[TEST_ARGS_NAME])
spitest.gen_output()



workgroup_size_x = 4
grid_size_x = 360
inst_ipw = 256
pip = 2
spitest = SpiClass(grid_size_x *64*workgroup_size_x, workgroup_size_x*64,user_sgpr,tgid_x_en,tgid_y_en,tgid_z_en,tg_size_en,vgpr,unorder,inst_ipw)
spitest.test_args.update({TEST_ARGS_NAME : f"perf_spi_launch_crawler/perf_spi_launch_crawler_ipw{inst_ipw}_tg{grid_size_x}_wpg{workgroup_size_x}_pip{pip}"})
	print(spitest.test_args[TEST_ARGS_NAME])
spitest.gen_output()


